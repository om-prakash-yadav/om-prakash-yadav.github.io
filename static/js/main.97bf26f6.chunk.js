(this.webpackJsonpfirebuzz=this.webpackJsonpfirebuzz||[]).push([[0],{218:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),i=n(79),o=n.n(i),a=n(25),s=n(126),j=n(24),b=n(86),l=n(80),u=n(164),d=n(42);function O(){var e=Object(a.f)(),t=w().roomId,n=Object(j.b)(e,"rooms",t);return Object(a.i)(n,{idField:"id"}).data}var h=n(122);function x(){var e=Object(a.d)();return Object(d.useQuery)("user",(function(){return Object(h.c)(e)})).data.user}var m=n(0),f=n(5);var p=function(){var e=Object(f.a)(Object(m.a)().mark((function e(t,n){var r,c;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g(),c=Object(j.b)(t,"rooms",r),e.next=4,Object(j.c)(c);case 4:if(!e.sent.exists()){e.next=7;break}return e.abrupt("return",p(t,n));case 7:return e.next=9,Object(j.h)(c,{hostId:n,timestamp:Object(j.g)()});case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){return Math.random().toString().substr(2,6)};function w(){var e=new URLSearchParams(window.location.search);return Object.fromEntries(e)}function v(){var e=x(),t=O().id,n=Object(a.f)(),r=Object(j.b)(n,"rooms",t,"guests",e.uid),c=Object(a.i)(r,{idField:"id"}).data,i=!(null===c||void 0===c||!c.name);return Object(d.useQuery)("guest",(function(){return Object(j.h)(r,{name:z(),buzzed:null,score:0})}),{enabled:!i}),c}function z(){var e=k[k.length*Math.random()|0];return"Guest ".concat(e)}var k=["Alligator","Anteater","Armadillo","Auroch","Axolotl","Badger","Bat","Bear","Beaver","Blobfish","Buffalo","Camel","Chameleon","Cheetah","Chinchilla","Chipmunk","Chupacabra","Cormorant","Coyote","Crow","Dingo","Dinosaur","Dog","Dolphin","Dragon","Duck","Elephant","Ferret","Fox","Frog","Giraffe","Goose","Gopher","Grizzly","Hamster","Hedgehog","Hippo","Hyena","Ibex","Ifrit","Iguana","Jackal","Jackalope","Kangaroo","Kiwi","Koala","Kraken","Lemur","Leopard","Liger","Lion","Llama","Manatee","Mink","Monkey","Moose","Narwhal","Octopus","Orangutan","Otter","Panda","Penguin","Platypus","Python","Quagga","Quokka","Rabbit","Raccoon","Rhino","Sheep","Shrew","Skunk","Squirrel","Tiger","Turtle","Unicorn","Walrus","Wolf","Wolverine","Wombat"];function y(){var e=O().id,t=Object(a.f)(),n=Object(j.a)(t,"rooms",e,"guests");return Object(a.h)(n,{idField:"id"}).data}function C(){return O().hostId===x().uid}function S(e){var t=O().id,n=Object(a.f)(),r=Object(j.b)(n,"rooms",t,"guests",e);return Object(d.useMutation)((function(e){return Object(j.i)(r,e)}))}var I=n(10);function F(){var e=Object(a.e)(),t=Object(j.d)(e),n=Object(s.a)(e),c=w().roomId;return Object(I.jsx)(a.a,{sdk:n,children:Object(I.jsx)(a.c,{sdk:t,children:Object(I.jsx)(d.QueryClientProvider,{client:R,children:Object(I.jsx)(b.a,{children:Object(I.jsx)(l.a,{bg:"gray.200",children:Object(I.jsx)(l.c,{maxW:"xl",p:0,bg:"white",children:Object(I.jsx)(r.Suspense,{fallback:Object(I.jsx)(M,{}),children:c?Object(I.jsx)(D,{}):Object(I.jsx)(A,{})})})})})})})})}var D=function(){var e=C(),t=O().id;return Object(r.useEffect)((function(){document.title="Firebuzz room: ".concat(t)}),[t]),e?Object(I.jsx)(W,{}):Object(I.jsx)(q,{})},M=function(){return Object(I.jsx)(l.b,{h:window.innerHeight,children:Object(I.jsx)(u.a,{isIndeterminate:!0,color:"teal.500"})})},R=new d.QueryClient({defaultOptions:{queries:{suspense:!0}}}),H=n(43),B=n(88),E=n(165),P=n(166),T=n(95);function A(){var e=function(){var e=Object(a.f)(),t=x();return Object(d.useMutation)((function(){return p(e,t.uid)}))}(),t=e.mutate,n=e.data;return Object(r.useEffect)((function(){n&&(document.location.search="?roomId=".concat(n))}),[n]),Object(I.jsxs)(l.e,{direction:"column",h:window.innerHeight,children:[Object(I.jsxs)(l.f,{px:5,h:"58px",bg:"teal.500",shadow:"base",children:[Object(I.jsx)(H.a,{as:T.b,w:"30px",h:"30px",color:"white"}),Object(I.jsx)(l.g,{color:"white",size:"md",children:"ISTE NIT Durgapur"})]}),Object(I.jsx)(l.a,{m:8}),Object(I.jsxs)(l.m,{spacing:"48px",children:[Object(I.jsx)(l.a,{rounded:"md",w:[300,400],p:2,shadow:"md",border:"1px",borderColor:"gainsboro",children:Object(I.jsx)("form",{children:Object(I.jsxs)(l.m,{p:4,align:"start",spacing:8,children:[Object(I.jsx)(l.g,{size:"sm",children:"Join a game"}),Object(I.jsxs)(l.e,{w:"258px",align:"center",children:[Object(I.jsx)(B.a,{isRequired:!0,children:Object(I.jsx)(E.a,{name:"roomId",variant:"flushed",placeholder:"Room number",maxW:"40"})}),Object(I.jsx)(l.k,{}),Object(I.jsx)(P.a,{variant:"outline",colorScheme:"teal",type:"submit",children:"Join"})]})]})})}),Object(I.jsx)(l.a,{rounded:"md",w:[300,400],p:2,shadow:"md",border:"1px",borderColor:"gainsboro",children:Object(I.jsxs)(l.m,{p:4,align:"start",spacing:8,children:[Object(I.jsx)(l.g,{size:"sm",children:"Host a game"}),Object(I.jsxs)(l.e,{w:"258px",align:"center",children:[Object(I.jsx)(l.l,{children:"Create a new room"}),Object(I.jsx)(E.a,{name:"roomId",type:"hidden",value:""}),Object(I.jsx)(l.k,{}),Object(I.jsx)(P.a,{variant:"outline",colorScheme:"teal",onClick:function(){return t()},children:"Host"})]})]})}),Object(I.jsx)(l.a,{rounded:"md",w:[300,400],p:4,shadow:"md",border:"1px",borderColor:"gainsboro",children:Object(I.jsx)(l.l,{fontSize:"sm",colorScheme:"gray",children:"\ud83d\udca1 Tip: you can re-join the same room again without losing your progress"})})]})]})}var N=n(120),Q=n(167),L=new Audio("/audio/buzz.mp3");function W(){var e=O(),t=e.id,n=e.hostId;return Object(I.jsxs)(l.e,{direction:"column",h:window.innerHeight,children:[Object(I.jsxs)(l.f,{px:5,h:"58px",bg:"teal.500",shadow:"base",children:[Object(I.jsx)(N.a,{color:"white",size:"lg",onClick:function(){window.location.href=window.location.origin+window.location.pathname}}),Object(I.jsxs)(l.g,{color:"white",size:"md",children:["Room number: ",t]})]}),n?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(G,{}),Object(I.jsx)(l.a,{m:6}),Object(I.jsx)(ee,{})]}):Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(Q.a,{status:"error",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[Object(I.jsx)(Q.c,{boxSize:"40px"}),Object(I.jsx)(Q.d,{mt:4,mb:1,fontSize:"lg",children:"This room number is no longer vailable"}),Object(I.jsx)(Q.b,{children:"Try navigating back and create a new one"})]})})]})}function G(){var e=y(),t=function(){var e=O().id,t=Object(a.f)(),n=Object(j.a)(t,"rooms",e,"guests"),r=Object(a.g)(n).data;return Object(d.useMutation)((function(){var e=Object(j.j)(t);return r.docs.map((function(t){return e.update(t.ref,{buzzed:null})})),e.commit()}))}().mutate,n=1===e.filter((function(e){return!!e.buzzed})).length;return Object(r.useEffect)((function(){n&&L.play()}),[n]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(l.f,{px:4,py:1,spacing:"-5px",children:Object(I.jsx)(l.l,{color:"pink.500",p:2,children:"You are the host"})}),Object(I.jsx)(l.a,{m:4}),Object(I.jsx)(l.b,{children:Object(I.jsx)(P.a,{colorScheme:"pink",disabled:e.every((function(e){return!e.buzzed})),onClick:function(){return t()},children:"Clear Buzzers"})})]})}var J=n(31),X=n(169),K=new Audio("/audio/buzz.mp3");function q(){var e=O(),t=e.id,n=e.hostId;return Object(I.jsxs)(l.e,{direction:"column",h:window.innerHeight,children:[Object(I.jsxs)(l.f,{px:5,h:"58px",bg:"teal.500",shadow:"base",children:[Object(I.jsx)(N.a,{color:"white",size:"lg",onClick:function(){window.location.href=window.location.origin+window.location.pathname}}),Object(I.jsxs)(l.g,{color:"white",size:"md",children:["Room number: ",t]})]}),n?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(U,{}),Object(I.jsx)(l.a,{m:6}),Object(I.jsx)(ee,{})]}):Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(Q.a,{status:"error",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[Object(I.jsx)(Q.c,{boxSize:"40px"}),Object(I.jsx)(Q.d,{mt:4,mb:1,fontSize:"lg",children:"This room number does not exist"}),Object(I.jsx)(Q.b,{children:"Try navigating back and use a different one"})]})})]})}function U(){var e=v(),t=e.id,n=e.name,r=e.buzzed,c=function(){var e=Object(a.f)(),t=O().id,n=v().id,r=Object(j.b)(e,"rooms",t,"guests",n);return Object(d.useMutation)((function(){return Object(j.i)(r,{buzzed:Object(j.g)()})}))}(),i=c.mutate;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(l.f,{px:4,py:1,spacing:"-5px",children:Object(I.jsx)(V,{id:t,name:n})}),Object(I.jsx)(l.a,{m:4}),Object(I.jsx)(l.b,{children:Object(I.jsx)(P.a,{colorScheme:"pink",borderRadius:"50%",h:"150px",w:"150px",isDisabled:!!r,onClick:function(){i(),K.play()},children:"Buzz!"})})]})}function V(e){var t=e.id,n=e.name,c=Object(J.d)(),i=c.isOpen,o=c.onOpen,a=c.onClose,s=Object(r.useRef)(),j=S(t).mutate,b=function(){var e=Object(f.a)(Object(m.a)().mark((function e(t){var n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=new FormData(t.target).get("name"),j({name:n}),a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)(P.a,{colorScheme:"pink",variant:"ghost",rightIcon:Object(I.jsx)(H.a,{as:T.a}),onClick:o,children:["Name: ",n,Object(I.jsxs)(X.a,{isOpen:i,onClose:a,initialFocusRef:s,children:[Object(I.jsx)(X.g,{}),Object(I.jsx)(X.d,{children:Object(I.jsxs)("form",{onSubmit:b,children:[Object(I.jsx)(X.f,{children:"Edit Name"}),Object(I.jsx)(X.c,{}),Object(I.jsx)(X.b,{children:Object(I.jsxs)(B.a,{children:[Object(I.jsx)(B.b,{children:"New name"}),Object(I.jsx)(E.a,{name:"name",defaultValue:n,ref:s})]})}),Object(I.jsxs)(X.e,{children:[Object(I.jsx)(P.a,{variant:"ghost",onClick:a,children:"Cancel"}),Object(I.jsx)(P.a,{colorScheme:"teal",type:"submit",children:"Confirm"})]})]})})]})]})}var Y=n(224),Z=n(113),$=n(168),_={type:"spring",stiffness:500,damping:30};function ee(){return Object(I.jsx)(Y.a,{children:Object(I.jsxs)(l.j,{columns:2,spacing:2,px:4,overflowX:"auto",children:[Object(I.jsx)(te,{}),Object(I.jsx)(ne,{})]})})}function te(){var e=y().filter((function(e){return!!e.buzzed})).sort((function(e,t){return e.buzzed.toMillis()-t.buzzed.toMillis()}));return Object(I.jsxs)(l.m,{alignItems:"start",overflowX:"auto",children:[Object(I.jsx)(l.l,{color:"teal.500",as:"b",children:"Buzzed"}),Object(I.jsx)(l.d,{}),Object(I.jsx)(l.h,{spacing:3,overflowX:"auto",width:"100%",children:e.map((function(t,n){var r=t.id,c=t.name,i=t.buzzed;return Object(I.jsx)(Z.a.div,{layoutId:r,transition:_,children:Object(I.jsxs)(l.i,{children:[Object(I.jsx)(l.l,{children:c}),Object(I.jsx)(l.a,{m:1}),Object(I.jsx)(l.l,{p:1,fontSize:"sm",color:"pink.500",children:n>0?"+".concat((null===i||void 0===i?void 0:i.toMillis())-e[0].buzzed.toMillis(),"  ms"):"\ud83c\udfc6"})]})},r)}))})]})}function ne(){var e=y().filter((function(e){return!e.buzzed})).sort((function(e,t){return t.score-e.score})),t=C();return Object(I.jsxs)(l.m,{alignItems:"start",overflowX:"auto",children:[Object(I.jsx)(l.l,{color:"teal.500",as:"b",children:"Not buzzed yet"}),Object(I.jsx)(l.d,{}),Object(I.jsx)(l.h,{spacing:3,overflowX:"auto",width:"100%",children:e.map((function(e){var n=e.id,r=e.name,c=e.score;return Object(I.jsx)(Z.a.div,{layoutId:n,transition:_,children:Object(I.jsxs)(l.i,{children:[Object(I.jsx)(l.l,{children:r}),Object(I.jsx)(l.a,{m:1}),t?Object(I.jsx)(re,{id:n,score:c}):Object(I.jsx)(l.l,{p:1,fontSize:"sm",color:"pink.500",children:1===c?"1 point":"".concat(c," points")})]})},n)}))})]})}function re(e){var t=e.id,n=e.score,c=Object(J.d)(),i=c.isOpen,o=c.onOpen,a=c.onClose,s=Object(r.useRef)(),j=S(t).mutate,b=function(){var e=Object(f.a)(Object(m.a)().mark((function e(t){var n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=+new FormData(t.target).get("score"),j({score:n}),a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)(P.a,{size:"xs",rightIcon:Object(I.jsx)(H.a,{as:T.c}),colorScheme:"pink",onClick:o,children:[1===n?"1 point":"".concat(n," points"),Object(I.jsxs)(X.a,{isOpen:i,onClose:a,initialFocusRef:s,children:[Object(I.jsx)(X.g,{}),Object(I.jsx)(X.d,{children:Object(I.jsxs)("form",{onSubmit:b,children:[Object(I.jsx)(X.f,{children:"Edit Score"}),Object(I.jsx)(X.c,{}),Object(I.jsx)(X.b,{children:Object(I.jsxs)(B.a,{children:[Object(I.jsx)(B.b,{children:"New score"}),Object(I.jsx)($.a,{name:"score",defaultValue:n,ref:s,children:Object(I.jsx)($.b,{})})]})}),Object(I.jsxs)(X.e,{children:[Object(I.jsx)(P.a,{variant:"ghost",onClick:a,children:"Cancel"}),Object(I.jsx)(P.a,{colorScheme:"teal",type:"submit",children:"Confirm"})]})]})})]})]})}var ce=document.getElementById("root");if(!ce)throw new Error("Failed to find the root element");o.a.createRoot(ce).render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)(a.b,{firebaseConfig:{apiKey:"AIzaSyDb6-66w-lHx0tF3z9POa4NR6PZfUb5ExQ",authDomain:"firebuzz-cf583.firebaseapp.com",projectId:"firebuzz-cf583",storageBucket:"firebuzz-cf583.appspot.com",messagingSenderId:"1028563536658",appId:"1:1028563536658:web:a133f1cef29d0206c341cb",measurementId:"G-1XQYL5HPMW"},suspense:!0,children:Object(I.jsx)(F,{})})}))}},[[218,1,2]]]);
//# sourceMappingURL=main.97bf26f6.chunk.js.map